<div th:fragment="hierarchyFragment(items, depth)">
    <div th:each="item, iterStat : ${items}">
        <button class="hierarchy-button tag-item" style="font-size: 20px" th:text="${item.name}"></button>
        
        <div class="hierarchy-button tag-item child-buttons tags-list" th:if="${item.subItems != null}">
            <div th:replace="~{_recursiveHierarchy :: hierarchyFragment(${item.subItems}, ${depth + 1})}"></div>
        </div>
    </div>
</div>